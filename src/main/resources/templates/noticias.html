<!DOCTYPE html>
<html lang="pt-BR" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<th:block th:switch="${#strings.capitalize(cidade)}">
		<th:block th:case="'Praiagrande'">
			<title th:text="'Notícias de ' + ${'Praia Grande'}"></title>
		</th:block>
		<th:block th:case="'Saovicente'">
			<title th:text="'Notícias de ' + ${'São Vicente'}"></title>
		</th:block>
		<th:block th:case="'Cubatao'">
			<title th:text="'Notícias de ' + ${'Cubatão'}"></title>
		</th:block>
		<th:block th:case="'Guaruja'">
			<title th:text="'Notícias de ' + ${'Guarujá'}"></title>
		</th:block>
		<th:block th:case="'Itanhaem'">
			<title th:text="'Notícias de ' + ${'Itanhaém'}"></title>
		</th:block>
		<th:block th:case="'Peruibe'">
			<title th:text="'Notícias de ' + ${'Peruíbe'}"></title>
		</th:block>
		<th:block th:case="'Mongagua'">
			<title th:text="'Notícias de ' + ${'Mongaguá'}"></title>
		</th:block>
		<th:block th:case="*">
			<title th:text="'Notícias de ' + ${#strings.capitalize(cidade)}"></title>
		</th:block>
	</th:block>
	<link rel="icon" th:href="@{/images/SIMS_CORACAO_VERDE.png}" type="image/x-icon">
	<link rel="stylesheet" th:href="@{/styles/main.css}">
	<link rel="stylesheet" href="assets/fontawesome-6.4.0/css/all.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
		integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-194JYMPFEE"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());

		gtag('config', 'G-194JYMPFEE');
	</script>
</head>

<body style="background-color: #f5f5f5;">
	<header class="home-header">
		<nav class="navbar navbar-expand-lg navbar-light bg">
			<a th:href="@{/}" onclick="ScrollTop()">
				<div class="div-logo">
					<img loading="lazy" th:src="@{/images/SIMS_VERDE_PASTEL.svg}" id="logo"
						alt="Logo do Projeto SIMS, contendo um desenho de coração com o ritmo sinusal no meio na cor verde, com a sigla 'SIMS' escrita abaixo ">
				</div>
			</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
				aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"
				id="toggle-navbar">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav mr-auto mt-2 mt-lg-0" id="navbar">
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
							data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							Baixada Santista
						</a>
						<div class="dropdown-menu" aria-labelledby="navbarDropdown" id="dropdown-menu">
							<a class="dropdown-item" th:href="@{/santos}">Santos</a>
							<a class="dropdown-item" th:href="@{/praiagrande}">Praia Grande</a>
							<a class="dropdown-item" th:href="@{/saovicente}">São Vicente</a>
							<a class="dropdown-item" th:href="@{/guaruja}">Guarujá</a>
							<a class="dropdown-item" th:href="@{/cubatao}">Cubatão</a>
							<a class="dropdown-item" th:href="@{/itanhaem}">Itanhaém</a>
							<a class="dropdown-item" th:href="@{/peruibe}">Peruíbe</a>
							<a class="dropdown-item" th:href="@{/bertioga}">Bertioga</a>
							<a class="dropdown-item" th:href="@{/mongagua}">Mongaguá</a>
						</div>
					</li>
					<div id="login-icon">
            <a th:href="@{/meu-perfil}" th:if="${usuarioLogado}"><i class="fa-solid fa-user"></i>  Meu Perfil   </a>
            <a th:href="@{/logout}" th:if="${usuarioLogado}"><i class="fa-solid fa-arrow-right-from-bracket" style="color: #ffffff"></i>  Sair</a>
            <a th:href="@{/login}" th:unless="${usuarioLogado}"><i class="fa-solid fa-user"></i> Login</a>
          </div>
				</ul>
			</div>
		</nav>

	</header><br>
	<h1 class="cidade" th:switch="${#strings.capitalize(cidade)}">
		<h1 class="cidade" th:case="'Cubatao'">Notícias de <span th:text="${'Cubatão'}"></span></h1>
		<h1 class="cidade" th:case="'Guaruja'">Notícias de <span th:text="${'Guarujá'}"></span></h1>
		<h1 class="cidade" th:case="'Itanhaem'">Notícias de <span th:text="${'Itanhaém'}"></span></h1>
		<h1 class="cidade" th:case="'Mongagua'">Notícias de <span th:text="${'Mongaguá'}"></span></h1>
		<h1 class="cidade" th:case="'Praiagrande'">Notícias de <span th:text="${'Praia Grande'}"></span></h1>
		<h1 class="cidade" th:case="'Peruibe'">Notícias de <span th:text="${'Peruíbe'}"></span></h1>
		<h1 class="cidade" th:case="'Saovicente'">Notícias de <span th:text="${'São Vicente'}"></span></h1>
		<h1 class="cidade" th:case="*">Notícias de <span th:text="${#strings.capitalize(cidade)}"></span></h1>
	</h1>
	<main class="article-container">
		<div class="article-content">
			<div th:each="noticia : ${noticiasList}" class="article-item">
				<a th:href="@{${noticia.urlNoticia}}" target="_blank">
					<img class="article-img" loading="lazy" th:src="${noticia.imagem}" alt="${noticia.title}">
					<div class="article-desc">
						<p class="article-date" th:text="${noticia.data}"></p>
						<h2 th:text="${noticia.title}"></h2>
						<p th:text="${noticia.content}"></p>
					</div>
				</a>
				<label class="favorite-button">
					<input type="checkbox" name="favorito" class="favorito-checkbox"
						th:data-noticia-imagem="${noticia.imagem}" th:data-noticia-title="${noticia.title}"
						th:data-noticia-data="${noticia.data}" th:data-noticia-content="${noticia.content}"
						th:data-noticia-url="${noticia.urlNoticia}" data-toggle="modal" data-target="#favoritoModal">
					<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor"
						class="bi bi-star-fill" viewBox="0 0 16 16" id="star-label">
						<path
							d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
					</svg>
				</label>
				<hr><br>

			</div>
			<div class="modal fade" id="favoritoModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
				aria-hidden="true">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="exampleModalLabel">Erro ao Salvar Notícia</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							<!-- Conteúdo da Modal -->
							<h3> Você não está logado!</h3>
							<p> Para salvar notícias você precisa entrar em sua conta</p>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
							<button type="button" class="btn btn-primary"
								th:onclick="window.location.href='/login'">Entrar</button>
						</div>
					</div>
				</div>
			</div>
	</main>
	<footer>
		<div class="icons">
			<a href="https://www.instagram.com/projeto.sims/" target="_blank"><i class="fa-brands fa-instagram"></i></a>
			<a href="https://www.linkedin.com/in/projeto-sims-5610002a1/" target="_blank"><i
					class="fa-brands fa-linkedin-in"></i></a>
			<a href="https://mail.google.com/mail/u/0/?fs=1&tf=cm&to=appsims.suporte@gmail.com" target="_blank"><i
					class="fa-solid fa-envelope"></i></a>
		</div>
		<div class="infos">
			<a th:href="@{/sobre}">
				<p>Sobre nós</p>
			</a>

			<a th:href="@{/termos}">
				<p>Termos de Uso</p>
			</a>

			<a th:href="@{/privacidade}">
				<p>Política de Privacidade</p>
			</a>
		</div>
		<div class="sub-footer">
			<p>Esse é um projeto de trabalho acadêmico do curso de SI FATEC Rubens Lara.</p>
		</div>
	</footer>
	<script src="./scripts/main.js"></script>
	<!-- Bootstrap scripts -->
	<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
		integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
		integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
		crossorigin="anonymous"></script>

	<script th:inline="javascript">
		/*<![CDATA[*/
		$(document).ready(function () {
			$('.favorito-checkbox').change(function () {
				debugger;
				let noticiaImagem = $(this).data('noticia-imagem');
				let noticiaTitulo = $(this).data('noticia-title');
				let noticiaData = $(this).data('noticia-data');
				let noticiaContent = $(this).data('noticia-content');
				let noticiaUrlNoticia = $(this).data('noticia-url');
				let isChecked = $(this).prop('checked');

				$.post({
					url: '/alterar-noticia',
					contentType: 'application/json',
					data: JSON.stringify({
						imagem: noticiaImagem,
						title: noticiaTitulo,
						data: noticiaData,
						content: noticiaContent,
						urlNoticia: noticiaUrlNoticia,
						checkBoxAtivo: isChecked
					}),
					error: function (error) {
						console.error('Erro ao enviar dados:', error);
					}
				});
			});
		});
		/*]]>*/
	</script>
</body>

</html>